Синтаксис Bash
==============

**Bash** (Bourne again shell) командный процессор разработанный в рамках проекта GNU(GNU's Not UNIX).



### Содержимое директории - команда ls
```bash
ls # список файлов
ls -l # список файлов и информация о них
ls -a # список файлов, включая скрытые файлы (имя начинается с точки)
```

### Показать дополнительную информацию, способ применения команды (manual) - команда man
```bash
man ls # мануал по команде ls
man sort # мануал по команде сортировки
```

### Отсортировать строки текстового файла - команда sort
```bash
sort file.txt # построчно отсортировать файл file.txt 
sort file.txt > output.txt # отсортировать файл file.txt и записать в файл output.txt
```

### Отобразить количество места, занимаемого файлами внутри данной директории - команда du
```bash
du -h # отобразить сколько места занимает каждый файл внутри директории (в том числе файлы внутри подкаталогов) в формате, привычном для человека
du -h --total # дополнительно вывести общий размер директории 
du -h --total -d1 # вывести только размер дочерних директорий. Параметр "-d1" означает "глубина вложенности директорий 1".  
```

### Отобразить количество свободного места - команда df
```bash
df -h # отобразить количество свободного места для каждой файловой системы в формате, привычном для человека. 
df -h ~ # отобразить количество свободного места для корневой директории текущего пользователя. 
```

### Конвеер/пайплайны позволяют последовательно применить цепочку команд к данным. 
```bash
cat file.txt | sort # вывести содержимое файла 'file.txt', полученный текст отсортировать построчно 
ls -l | wc -l # построчный вывод всех файлов внутри данной директории, подсчёт числа строк (считает число файлов внутри директории)
```

### Логическое и. Команда, следующая за символом '&&' будет выполнена, если предыдущая команда завершилась успешно - оператор &&
```bash
cat non_existing_file.txt && echo "hello" # при условии, что файл 'non_existing_file.txt' не существует, команда echo "hello" не будет выполнена
echo "hello" && echo "world" # Последовательно будут выведены строки "hello" и "world"
```

### Логическое или. Команда, следующая за символом '||' будет выполнена, если предыдущая команда завершилась с ошибкой - оператор ||
```bash
cat non_exists.txt || cat exists.txt # если файл 'non_exists.txt' не существует в данной директории, то будет выведено содержимое файла 'exists.txt'.
cat exists1.txt || cat exists2.txt # если оба файла существуют, то будет выведено содержимое ТОЛЬКО файла 'exists1.txt'
```

### Найти подстроку указанного текстового файла с использованием регулярных вырежений - команда grep
```bash
grep alias ~/.bashrc # Найти все строки, в которых упоминается 'alias', (кастомизируемые сокращения), внутри конфигурационного файла bash для текущего пользователя.
man ls | grep -- -a # Найти упоминания шаблона '-a' внутри мануала для команды ls. 
```

### Перейти в указанную директорию - команда cd
```bash
cd path # путь может быть как относительный (от текущей директории), так и абсолютный (от корня файловой системы) 
```

### Показать полный путь к текущей директории - команда pwd
```bash
pwd # print working directory 
```

### Вывести имя текущего пользователя - команда whoami
```bash
whoami # Выводит имя текущего пользователя
```

### Удаление файлов - команды rm
```bash
rm file # удалить файл
rm -r dir # удалить директорию, флаг -r означает рекурсивное удаление всего содержимого директории
rm -f file # удалить игнорируя предупреждения
rm -rf dir # очевидно из предыдущех двух пунктов, использовать с крайней осторожностью
```
**НИКОГДА не выполняйте следующую команду**:
```bash 
rm -rf /
```
Она с ненулевой вероятносью удалит все ваши файлы, начиная от корня файловой системы, а значит и операционнцю систему тоже.

Если вам очень сильно не повезёт, то ваш компьютер может превратиться в кирпич :wink:

### Создание файла - команда touch
```bash
touch file # 
```
### Создание директории - команда mkdir
```bash
mkdir dir 
```

### Перемещение объета - команда mv
```bash
mv file1 file2 # переместить файл (это же используется для переименования)
mv -v # вывести список обработанных файлов;
mv -n # тестовый режим, на самом деле никакие действия выполнены не будут;
mv -f # принудительно перезаписывать существующие файлы;

```

### Копирование объекта - команда cp
```bash
cp file1 file2 # скопировать file1 в file2

```

### Вывод содержимого файла в консоль - команда cat
```bash
cat file
```

### Вывод первых n строк в консоль - команда head
```bash
head -n 10 file # выведутся первые 10 строк
```

### Вывод последних n строк в консоль - команда tail
```bash
tail -n 10 file # выведутся первые 10 строк
```

### Построчно прочитать и выполнить комманды, указанные в файле аргументе - команда source
```bash
source file.sh # выполнить команды внутри файла file.sh 
source ~/.bashrc # выполнить команды внутри конфигурационного файла .bashrc (описано ниже)
```

### История
Историю команд bash хранит в файле `~/.bash_history`.
Посмотреть историю введенных команд можно выполнив в bash `history`.
По умолчанию bash хранит историю о последних 2000 команд (`echo $HISTFILESIZE`).



### Конфигурационный файл ~/.bashrc
Скрипт, исполняемый при каждом запуске терминала, если запуск произведен пользователем. 
Позволяет персонализировать терминал, например задать alias, переменные среды окружения (описано ниже). 
При запуске терминала выполняется последовательность действий, аналогичная команде "source ~/.bashrc" 



### Регулярные выражения
* Некоторые команды например rm можно применять к определённому шаблону:
* `*` - любая подстрока, в том числе пустая;
* `?` - один любой символ;
* `[a-z]` - один любой символ из списка.

Так, следующая команда удалит все файлы внутри директории, имя которых начинается с fife.
```bash
rm -rf file*
```



### Переменные среды окружения

У каждого запущенного процесса в UNIX есть своя среда окружения (environment). Среда окружения это набор переменных имя-значение которые доступны для чтения и изменения процессу.

| Переменная | Описание                                           |
|------------|----------------------------------------------------|
| `$HOME`     | домашний каталог пользователя |
| `$PWD`      | текущий каталог |
| `$UID`      | идентификатор пользователя запустивщего сценарий |
| `$SHELL`    | текущий командный процессор (по умолчанию bash)|
| `$TERM`     | тип терминала пользователя |
| `$USER`     | имя пользователя |
| `$PATH`     | список каталогов для поиска запускаемых программ (разделяются двоеточием) |


Вывести все переменные окружения - команда env

Задать переменную окружения на время текущей сессии - команда export

